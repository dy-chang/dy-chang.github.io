import holoviews as hv
from holoviews import opts
import pandas as pd
import numpy as np
hv.extension('bokeh')

# Sample matrix representing the export volumes between 5 countries
export_data = np.array([[0, 44704, 1407, 8699, 14175,2742,2020,479],   
                        [34648, 0, 226, 1158, 1091,1392, 2269, 168],   
                        [3583, 463, 0, 771, 451, 22, 34, 10],   
                        [24029, 4448, 785, 0, 820,132,279,84],   
                        [33527, 2926, 295, 481, 0,368,223, 41],
                        [6604, 5325, 47,191, 646, 0, 6684, 140],
                        [5216, 7893, 71, 370, 378, 5401,0, 887],
                        [1951,1095,17,193,74,226,1498,0]]) 

labels = ['St. Louis County', 'St. Louis City', 'Franklin County', 'Jefferson County', 'St. Charles', 'Madison County', 
          'St.Clairs County','Monroe County']


# Creating a pandas DataFrame
df = pd.DataFrame(export_data, index=labels, columns=labels)
df = df.stack().reset_index()

df.columns = ['source', 'target', 'value']

# Creating a Chord object
chord = hv.Chord(df)

# Styling the Chord diagram
chord.opts(
    opts.Chord(
        cmap='Category20', edge_cmap='Category20', 
        labels='source', label_text_font_size='10pt',  
        edge_color='source', node_color='index', 
        width=700, height=700 
    )
).select(value=(5, None)) 

# Display the plot
chord